<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cocina Pop - Scan for Flavor</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="/style.css">
    <link rel="manifest" href="/manifest.json">
    <meta name="theme-color" content="#FFEF00">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
</head>
<body>

<!-- ‚ïê‚ïê‚ïê SPLASH ‚ïê‚ïê‚ïê -->
<div id="splash" onclick="entrar()">
    <div class="splash-ring"></div>
    <div class="splash-content">
        <h1 class="splash-title">COCINA<span>POP</span></h1>
        <p class="splash-sub">SCAN FOR FLAVOR</p>
        <p class="splash-tap">TAP TO ENTER</p>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê APP ‚ïê‚ïê‚ïê -->
<div id="app">

    <!-- HEADER -->
    <header class="header">
        <div class="logo">COCINA <span>POP</span></div>
        <i class="fa-solid fa-bolt header-icon"></i>
    </header>

    <!-- ‚îÄ‚îÄ‚îÄ HOME ‚îÄ‚îÄ‚îÄ -->
    <main id="page-home" class="page active">
        <div class="scan-btn" onclick="startScanner()">
            <div class="scan-btn-inner">
                <i class="fa-solid fa-camera"></i>
                <span>ESCANEAR PRODUCTO</span>
            </div>
        </div>

        <div class="section-title">‚≠ê TUS FAVORITOS</div>
        <div id="favoritos-home">
            <p class="empty-msg">Sin favoritos a√∫n</p>
        </div>

        <div class="section-title">üì¶ √öLTIMO PEDIDO</div>
        <div id="ultimo-pedido">
            <p class="empty-msg">Sin pedidos a√∫n</p>
        </div>
    </main>

    <!-- ‚îÄ‚îÄ‚îÄ CAT√ÅLOGO ‚îÄ‚îÄ‚îÄ -->
    <main id="page-catalogo" class="page">
        <div class="cat-tabs">
            <button class="cat-pill active" onclick="filtrarCat('MARKET', this)">MARKET</button>
            <button class="cat-pill" onclick="filtrarCat('FREEZER', this)">FREEZER</button>
            <button class="cat-pill" onclick="filtrarCat('HELADERA', this)">HELADERA</button>
            <button class="cat-pill" onclick="filtrarCat('DEPOSITO', this)">DEP√ìSITO</button>
        </div>
        <div id="catalogo-grid" class="cat-grid"></div>
    </main>

    <!-- ‚îÄ‚îÄ‚îÄ FAVORITOS ‚îÄ‚îÄ‚îÄ -->
    <main id="page-favoritos" class="page">
        <div class="section-title">‚≠ê MIS FAVORITOS</div>
        <div id="lista-favoritos"></div>
    </main>

    <!-- ‚îÄ‚îÄ‚îÄ HISTORIAL ‚îÄ‚îÄ‚îÄ -->
    <main id="page-historial" class="page">
        <div class="section-title">üìú MIS COMPRAS</div>
        <div id="lista-historial"></div>
    </main>

    <!-- BOTTOM NAV -->
    <nav class="bottom-nav">
        <div class="nav-item active" onclick="goTab('home', this)"><i class="fa-solid fa-house"></i><span>Inicio</span></div>
        <div class="nav-item" onclick="goTab('catalogo', this)"><i class="fa-solid fa-grid-vertical"></i><span>Cat√°logo</span></div>
        <div class="nav-item" onclick="goTab('favoritos', this)"><i class="fa-solid fa-star"></i><span>Favoritos</span></div>
        <div class="nav-item" onclick="goTab('historial', this)"><i class="fa-solid fa-clock-rotate-left"></i><span>Historial</span></div>
    </nav>
</div>

<!-- ‚ïê‚ïê‚ïê MODAL PRODUCTO ‚ïê‚ïê‚ïê -->
<div id="modal-producto" class="modal-overlay" onclick="closeModal('modal-producto')">
    <div class="modal-card" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeModal('modal-producto')"><i class="fa-solid fa-xmark"></i></button>
        <div class="modal-producto-img" id="modal-img">üçó</div>
        <h2 class="modal-producto-nom" id="modal-nom">PRODUCTO</h2>
        <p class="modal-producto-precio" id="modal-precio">$0</p>
        <p class="modal-producto-cat" id="modal-cat">FREEZER ‚Ä¢ x4</p>
        <div id="modal-tips" class="modal-producto-tips" style="display:none;"></div>
        <div id="modal-videos" class="modal-producto-videos"></div>
        <div class="modal-producto-btns">
            <button class="btn-whatsapp" id="btn-whatsapp-modal" onclick="pedirWhatsApp()">
                <i class="fa-brands fa-whatsapp"></i> PEDIR POR WHATSAPP
            </button>
            <button class="btn-favorito" id="btn-favorito" onclick="toggleFavorito()">
                <i class="fa-solid fa-star"></i> AGREGAR A FAVORITOS
            </button>
        </div>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê MODAL SCANNER ‚ïê‚ïê‚ïê -->
<div id="modal-scanner" class="modal-overlay modal-scanner-overlay">
    <div class="modal-card modal-scanner-card">
        <button class="modal-close modal-close-white" onclick="closeScanner()"><i class="fa-solid fa-xmark"></i></button>
        <h3 class="scanner-title">ESCANEAR QR</h3>
        <div id="reader"></div>
        <p class="scanner-hint">Apunt√° la c√°mara al c√≥digo QR</p>
    </div>
</div>

<!-- ‚ïê‚ïê‚ïê MODAL NO ENCONTRADO ‚ïê‚ïê‚ïê -->
<div id="modal-no-encontrado" class="modal-overlay" onclick="closeModal('modal-no-encontrado')">
    <div class="modal-card modal-centrado" onclick="event.stopPropagation()">
        <button class="modal-close" onclick="closeModal('modal-no-encontrado')"><i class="fa-solid fa-xmark"></i></button>
        <div class="modal-no-emoji">‚ùì</div>
        <h2 class="modal-no-titulo">QR NO ENCONTRADO</h2>
        <p class="modal-no-texto">Este producto no est√° en el cat√°logo de Cocina Pop</p>
        <button class="btn-whatsapp" onclick="closeModal('modal-no-encontrado'); consultarWA();">
            <i class="fa-brands fa-whatsapp"></i> CONSULTAMOS A COCINA POP
        </button>
    </div>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html5-qrcode/2.3.8/html5-qrcode.min.js"></script>
<script src="/script.js"></script>
<script>
    if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/service-worker.js')
            .then(() => console.log('SW registrado'))
            .catch(err => console.log('Error SW:', err));
    }
</script>
</body>
</html>
